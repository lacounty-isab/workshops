<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="519px" height="213px" viewBox="-0.5 -0.5 519 213" style="background-color: rgb(255, 255, 255);"><defs><clipPath id="mx-clip-11-94-112-26-0"><rect x="11" y="94" width="112" height="26"/></clipPath><clipPath id="mx-clip-11-120-112-26-0"><rect x="11" y="120" width="112" height="26"/></clipPath><clipPath id="mx-clip-182-33-101-26-0"><rect x="182" y="33" width="101" height="26"/></clipPath><clipPath id="mx-clip-182-59-101-26-0"><rect x="182" y="59" width="101" height="26"/></clipPath><clipPath id="mx-clip-182-85-101-26-0"><rect x="182" y="85" width="101" height="26"/></clipPath></defs><g><rect x="307" y="1" width="210" height="210" rx="31.5" ry="31.5" fill="#fff2cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 8px; margin-left: 308px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 14px"><b>Effective Scope Calculation</b></font></div></div></div></foreignObject><text x="412" y="20" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Effective Scope Calculation</text></switch></g><path d="M 7 89 L 7 63 L 127 63 L 127 89" fill="#ffcccc" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><path d="M 7 89 L 7 141 L 127 141 L 127 89" fill="#f19c99" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><path d="M 7 89 L 127 89" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="66.5" y="80.5">Token</text></g><rect x="7" y="89" width="120" height="26" fill="none" stroke="none" pointer-events="all"/><g fill="#000000" font-family="Helvetica" clip-path="url(#mx-clip-11-94-112-26-0)" font-size="12px"><text x="12.5" y="106.5">iss: idp2</text></g><rect x="7" y="115" width="120" height="26" fill="none" stroke="none" pointer-events="all"/><g fill="#000000" font-family="Helvetica" clip-path="url(#mx-clip-11-120-112-26-0)" font-size="12px"><text x="12.5" y="132.5">scopes: [A, B, C]</text></g><path d="M 178 28 L 178 2 L 287 2 L 287 28" fill="#ffcc99" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><path d="M 178 28 L 178 106 L 287 106 L 287 28" fill="#ff9933" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><path d="M 178 28 L 287 28" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="232" y="19.5">IDP Registry</text></g><rect x="178" y="28" width="109" height="26" fill="none" stroke="none" pointer-events="all"/><g fill="#000000" font-family="Helvetica" clip-path="url(#mx-clip-182-33-101-26-0)" font-size="12px"><text x="183.5" y="45.5">idp1: [ A ]</text></g><rect x="178" y="54" width="109" height="26" fill="none" stroke="none" pointer-events="all"/><g fill="#000000" font-family="Helvetica" clip-path="url(#mx-clip-182-59-101-26-0)" font-size="12px"><text x="183.5" y="71.5">idp2: [ B, C, D]</text></g><rect x="178" y="80" width="109" height="26" fill="none" stroke="none" pointer-events="all"/><g fill="#000000" font-family="Helvetica" clip-path="url(#mx-clip-182-85-101-26-0)" font-size="12px"><text x="183.5" y="97.5">idp3: [ A, B, C ]</text></g><rect x="312" y="55" width="70" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 65px; margin-left: 313px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">[ B, C, D ]</div></div></div></foreignObject><text x="347" y="69" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[ B, C, D ]</text></switch></g><rect x="314" y="114" width="70" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 124px; margin-left: 315px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">[ A, B, C ]</div></div></div></foreignObject><text x="349" y="128" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[ A, B, C ]</text></switch></g><rect x="321" y="84" width="120" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 94px; margin-left: 322px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 18px">∩ </font><font style="font-size: 12px">(intersection)</font></div></div></div></foreignObject><text x="381" y="98" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">∩ (intersection)</text></switch></g><path d="M 120.04 127.99 L 305.32 127.36" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="117.04" cy="128" rx="3" ry="3" fill="#000000" stroke="#000000" pointer-events="all"/><path d="M 310.57 127.34 L 303.58 130.87 L 305.32 127.36 L 303.56 123.87 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 79.96 102 L 137 102 Q 147 102 147 92 L 147 77 Q 147 67 157 67 L 171.63 67" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="76.96" cy="102" rx="3" ry="3" fill="#000000" stroke="#000000" pointer-events="all"/><path d="M 176.88 67 L 169.88 70.5 L 171.63 67 L 169.88 63.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 280 67 L 310.63 67" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="277" cy="67" rx="3" ry="3" fill="#000000" stroke="#000000" pointer-events="all"/><path d="M 315.88 67 L 308.88 70.5 L 310.63 67 L 308.88 63.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="332" y="151" width="30" height="15" fill="none" stroke="none" transform="rotate(90,347,158.5)" pointer-events="all"/><path d="M 332 151 L 362 151 M 362 166 L 332 166" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" transform="rotate(90,347,158.5)" pointer-events="all"/><rect x="312" y="181" width="70" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 191px; margin-left: 313px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">[ B, C ]</div></div></div></foreignObject><text x="347" y="195" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">[ B, C ]</text></switch></g><rect x="388" y="181" width="100" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 191px; margin-left: 389px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Effective Scope</div></div></div></foreignObject><text x="438" y="195" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Effective Scope</text></switch></g><rect x="388" y="57" width="116" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 114px; height: 1px; padding-top: 67px; margin-left: 389px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">IDP Scope</div></div></div></foreignObject><text x="446" y="71" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">IDP Scope</text></switch></g><rect x="388" y="116" width="116" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 114px; height: 1px; padding-top: 126px; margin-left: 389px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Requested Scope</div></div></div></foreignObject><text x="446" y="130" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Requested Scope</text></switch></g><rect x="0" y="17" width="130" height="50" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 42px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Signed by idp2<br />Sent by Browser</div></div></div></foreignObject><text x="65" y="46" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Signed by idp2...</text></switch></g><rect x="184" y="128" width="123" height="65" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 121px; height: 1px; padding-top: 161px; margin-left: 185px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">API server maintains IDP Registry and performs effective scope calculation.</div></div></div></foreignObject><text x="246" y="164" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">API server maintains...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>